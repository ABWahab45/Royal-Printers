{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Gallery=()=>{const[media,setMedia]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{const fetchMedia=async()=>{try{const response=await axios.get(\"http://localhost:5000/api/media\");setMedia(response.data);setLoading(false);}catch(err){console.error(\"Error fetching media:\",err);setError(\"Failed to load media. Please try again later.\");setLoading(false);}};fetchMedia();},[]);const renderMediaItem=item=>{const serverUrl=\"http://localhost:5000\";const fullPath=`${serverUrl}${item.filePath}`;if(item.type===\"image\"){return/*#__PURE__*/_jsx(\"img\",{src:fullPath,alt:item.title},item._id);}else if(item.type===\"video\"){return/*#__PURE__*/_jsxs(\"video\",{controls:true,children:[/*#__PURE__*/_jsx(\"source\",{src:fullPath,type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]},item._id);}else{// For documents, show a link\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"document-item\",children:/*#__PURE__*/_jsxs(\"a\",{href:fullPath,target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn btn-outline-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-file-earmark-text me-2\"}),item.title]})},item._id);}};return/*#__PURE__*/_jsxs(\"section\",{id:\"gallery\",className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gallery\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),!loading&&!error&&media.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"gallery-grid\",children:media.map(item=>renderMediaItem(item))}),!loading&&!error&&media.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-grid mt-4\",children:[[1,2,3,4,5,6,8,9].map(i=>/*#__PURE__*/_jsx(\"img\",{src:`/images/machines (${i}).jpg`,alt:`machines(${i})`},i)),/*#__PURE__*/_jsx(\"img\",{src:\"/images/bobst sp.jpeg\",alt:\"bobst sp\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/die cutter.jpeg\",alt:\"die cutter\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/fold and glue.jpg\",alt:\"fold and glue\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/heidelberg.jpeg\",alt:\"heidelberg\"}),/*#__PURE__*/_jsx(\"video\",{controls:true,children:/*#__PURE__*/_jsx(\"source\",{src:\"/videos/sample1.mp4\",type:\"video/mp4\"})}),/*#__PURE__*/_jsx(\"video\",{controls:true,children:/*#__PURE__*/_jsx(\"source\",{src:\"/videos/sample2.mp4\",type:\"video/mp4\"})})]})]});};export default Gallery;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Gallery","media","setMedia","loading","setLoading","error","setError","fetchMedia","response","get","data","err","console","renderMediaItem","item","serverUrl","fullPath","filePath","type","src","alt","title","_id","controls","children","className","href","target","rel","id","role","length","map","i"],"sources":["D:/wahab/class/sem 6/web/Wahab BCS223121/frontend/src/pages/Gallery.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Gallery = () => {\r\n  const [media, setMedia] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchMedia = async () => {\r\n      try {\r\n        const response = await axios.get(\"http://localhost:5000/api/media\");\r\n        setMedia(response.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Error fetching media:\", err);\r\n        setError(\"Failed to load media. Please try again later.\");\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchMedia();\r\n  }, []);\r\n\r\n  const renderMediaItem = (item) => {\r\n    const serverUrl = \"http://localhost:5000\";\r\n    const fullPath = `${serverUrl}${item.filePath}`;\r\n    \r\n    if (item.type === \"image\") {\r\n      return <img key={item._id} src={fullPath} alt={item.title} />;\r\n    } else if (item.type === \"video\") {\r\n      return (\r\n        <video key={item._id} controls>\r\n          <source src={fullPath} type=\"video/mp4\" />\r\n          Your browser does not support the video tag.\r\n        </video>\r\n      );\r\n    } else {\r\n      // For documents, show a link\r\n      return (\r\n        <div key={item._id} className=\"document-item\">\r\n          <a href={fullPath} target=\"_blank\" rel=\"noopener noreferrer\" className=\"btn btn-outline-primary\">\r\n            <i className=\"bi bi-file-earmark-text me-2\"></i>\r\n            {item.title}\r\n          </a>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section id=\"gallery\" className=\"text-center\">\r\n      <h2>Gallery</h2>\r\n      \r\n      {loading && <div className=\"spinner-border text-primary\" role=\"status\"><span className=\"visually-hidden\">Loading...</span></div>}\r\n      \r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      \r\n      {/* {!loading && !error && media.length === 0 && (\r\n        <div className=\"alert alert-info\">No media items found. Upload some content to see it here!</div>\r\n      )} */}\r\n      \r\n      {!loading && !error && media.length > 0 && (\r\n        <div className=\"gallery-grid\">\r\n          {media.map(item => renderMediaItem(item))}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Legacy content as fallback */}\r\n      {!loading && !error && media.length === 0 && (\r\n        <div className=\"gallery-grid mt-4\">\r\n          {/* <h3 className=\"w-100 mb-3\">Sample Content</h3> */}\r\n          {[1,2,3,4,5,6,8,9].map(i => (\r\n            <img key={i} src={`/images/machines (${i}).jpg`} alt={`machines(${i})`} />\r\n          ))}\r\n          <img src=\"/images/bobst sp.jpeg\" alt=\"bobst sp\" />\r\n          <img src=\"/images/die cutter.jpeg\" alt=\"die cutter\" />\r\n          <img src=\"/images/fold and glue.jpg\" alt=\"fold and glue\" />\r\n          <img src=\"/images/heidelberg.jpeg\" alt=\"heidelberg\" />\r\n          <video controls>\r\n            <source src=\"/videos/sample1.mp4\" type=\"video/mp4\" />\r\n          </video>\r\n          <video controls>\r\n            <source src=\"/videos/sample2.mp4\" type=\"video/mp4\" />\r\n          </video>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Gallery;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}