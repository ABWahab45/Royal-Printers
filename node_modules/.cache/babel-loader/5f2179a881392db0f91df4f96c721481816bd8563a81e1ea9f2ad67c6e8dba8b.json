{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Products=()=>{const[products,setProducts]=useState([]);const[media,setMedia]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{const fetchData=async()=>{try{// Fetch products from the backend\nconst productsResponse=await axios.get(\"http://localhost:5000/api/products\");setProducts(productsResponse.data);// Fetch media items that are images and have 'product' in the title\nconst mediaResponse=await axios.get(\"http://localhost:5000/api/media\");const productImages=mediaResponse.data.filter(item=>item.type===\"image\"&&item.title.toLowerCase().includes(\"product\"));setMedia(productImages);setLoading(false);}catch(err){console.error(\"Error fetching data:\",err);setError(\"Failed to load products. Please try again later.\");setLoading(false);}};fetchData();},[]);return/*#__PURE__*/_jsxs(\"section\",{id:\"products\",className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Our Products\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),!loading&&!error&&products.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Featured Products\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:products.map(product=>/*#__PURE__*/_jsx(\"li\",{className:\"card shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text text-primary fw-bold\",children:[\"$\",product.price]})]})},product._id))})]}),!loading&&!error&&media.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Product Gallery\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:media.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000${item.filePath}`,alt:item.title,className:\"img-fluid rounded shadow-sm\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:item.title})]},item._id))})]}),!loading&&!error&&products.length===0&&media.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:[1,2,3,4,5,6,7,8,9,10].map(i=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"img\",{src:`/images/product (${i}).jpg`,alt:`Product ${i}`})},i))})})]});};export default Products;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Products","products","setProducts","media","setMedia","loading","setLoading","error","setError","fetchData","productsResponse","get","data","mediaResponse","productImages","filter","item","type","title","toLowerCase","includes","err","console","id","className","children","role","length","map","product","name","description","price","_id","src","filePath","alt","i"],"sources":["D:/wahab/class/sem 6/web/Wahab BCS223121/frontend/src/pages/Products.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Products = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [media, setMedia] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Fetch products from the backend\r\n        const productsResponse = await axios.get(\"http://localhost:5000/api/products\");\r\n        setProducts(productsResponse.data);\r\n\r\n        // Fetch media items that are images and have 'product' in the title\r\n        const mediaResponse = await axios.get(\"http://localhost:5000/api/media\");\r\n        const productImages = mediaResponse.data.filter(\r\n          item => item.type === \"image\" && item.title.toLowerCase().includes(\"product\")\r\n        );\r\n        setMedia(productImages);\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Error fetching data:\", err);\r\n        setError(\"Failed to load products. Please try again later.\");\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <section id=\"products\" className=\"text-center\">\r\n      <h2>Our Products</h2>\r\n\r\n      {loading && <div className=\"spinner-border text-primary\" role=\"status\"><span className=\"visually-hidden\">Loading...</span></div>}\r\n\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n\r\n      {/* {!loading && !error && products.length === 0 && media.length === 0 && (\r\n        <div className=\"alert alert-info\">No products found. Please check back later!</div>\r\n      )} */}\r\n\r\n      {/* Display products from the database if available */}\r\n      {!loading && !error && products.length > 0 && (\r\n        <div className=\"mb-5\">\r\n          <h3>Featured Products</h3>\r\n          <ul className=\"product-list\">\r\n            {products.map(product => (\r\n              <li key={product._id} className=\"card shadow-sm\">\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">{product.name}</h5>\r\n                  <p className=\"card-text\">{product.description}</p>\r\n                  <p className=\"card-text text-primary fw-bold\">${product.price}</p>\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* Display uploaded product images if available */}\r\n      {!loading && !error && media.length > 0 && (\r\n        <div className=\"mb-5\">\r\n          <h3>Product Gallery</h3>\r\n          <ul className=\"product-list\">\r\n            {media.map(item => (\r\n              <li key={item._id}>\r\n                <img\r\n                  src={`http://localhost:5000${item.filePath}`}\r\n                  alt={item.title}\r\n                  className=\"img-fluid rounded shadow-sm\"\r\n                />\r\n                <p className=\"mt-2\">{item.title}</p>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* Legacy content as fallback */}\r\n      {!loading && !error && products.length === 0 && media.length === 0 && (\r\n        <div className=\"mt-4\">\r\n          {/* <h3>Sample Products</h3> */}\r\n          <ul className=\"product-list\">\r\n            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(i => (\r\n              <li key={i}><img src={`/images/product (${i}).jpg`} alt={`Product ${i}`} /></li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Products;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}